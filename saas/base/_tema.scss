@use "sass:map";

// ----------------------------------------------
// Paleta de colores
$fondo: map.get($theme-colors, $color-tema);
$paleta: generar-colores($fondo) !default;
$colores: (
    "primary": map-get($paleta, 'primary'),
    "secondary": map-get($paleta, 'secondary'),
    "success": map-get($paleta, 'success'),
    "info": map-get($paleta, 'info'),
    "warning": map-get($paleta, 'warning'),
    "danger": map-get($paleta, 'danger'),
    "light": map-get($paleta, 'light'),
    "dark": map-get($paleta, 'dark'),
    "acentuado": map-get($paleta, 'acentuado'),
    "gris": map-get($paleta, 'gris'),
    "complemen": map-get($paleta, 'complemen'),
    "analogo1": map-get($paleta, 'analogo1'),
    "analogo2": map-get($paleta, 'analogo2'),
    "triadico1": map-get($paleta, 'triadico1'),
    "triadico2": map-get($paleta, 'triadico2'),
    "tetradico": map-get($paleta, 'tetradico'),
) !default;

// ----------------------------------------------
// Predeterminados (si no se han establecido)
$fuente: Verdana, Geneva, Tahoma, sans-serif !default;
$talla: 1rem !default;

// ----------------------------------------------
// Valores Calculados
$texto: color-contrast($fondo);

@include cssvars((
    fondo: $fondo,
    fondo-rgb: to-rgb($fondo),
    texto: $texto,
    texto-rgb: to-rgb($texto),
    fuente-nombre: $fuente,
    fuente-talla: $talla,
));

@if evaluar-color($fondo) == 'claro' {
    @include cssvars((
        fondo2: tint-color($fondo, 50%),
        fondo2-rgb: to-rgb(tint-color($fondo, 50%)),
        texto2: color-contrast(tint-color($fondo, 50%)),
        texto2-rgb: to-rgb(color-contrast(tint-color($fondo, 50%))),
        fondo3: tint-color($fondo, 70%),
        fondo3-rgb: to-rgb(tint-color($fondo, 70%)),
        texto3: color-contrast(tint-color($fondo, 70%)),
        texto3-rgb: to-rgb(color-contrast(tint-color($fondo, 70%))),
    ));
} @else {
    @include cssvars((
        fondo2: shade-color($fondo, 50%),
        fondo2-rgb: to-rgb(shade-color($fondo, 50%)),
        texto2: color-contrast(shade-color($fondo, 50%)),
        texto2-rgb: to-rgb(color-contrast(shade-color($fondo, 50%))),
        fondo3: shade-color($fondo, 70%),
        fondo3-rgb: to-rgb(shade-color($fondo, 70%)),
        texto3: color-contrast(shade-color($fondo, 70%)),
        texto3-rgb: to-rgb(color-contrast(shade-color($fondo, 70%))),
    ));
}

@mixin configuracion-tema() {
    --bs-body-font-family: #{cssvar(fuente-nombre)};
    --bs-body-font-size: #{cssvar(fuente-talla)};
    --bs-body-color: #{cssvar(texto)};
    --bs-body-color-rgb: #{cssvar(texto-rgb)};
    --bs-body-bg: #{cssvar(fondo)};
    --bs-body-bg-rgb: #{cssvar(fondo-rgb)};
    --bs-secondary-color: #{cssvar(texto2)};
    --bs-secondary-color-rgb: #{cssvar(texto2-rgb)};
    --bs-secondary-bg: #{cssvar(fondo2)};
    --bs-secondary-bg-rgb: #{cssvar(fondo2-rgb)};
    --bs-tertiary-color: #{cssvar(texto3)};
    --bs-tertiary-color-rgb: #{cssvar(texto3-rgb)};
    --bs-tertiary-bg: #{cssvar(fondo3)};
    --bs-tertiary-bg-rgb: #{cssvar(fondo3-rgb)};

    @each $color, $value in $colores {
        --bs-#{$color}: #{$value};
        --bs-#{$color}-rgb: #{to-rgb($value)};
        --bs-#{$color}-text-emphasis: #{shade-color($value, 60%)};
        --bs-#{$color}-bg-subtle: #{tint-color($value, 80%)};
        --bs-#{$color}-border-subtle: #{tint-color($value, 50%)};
    }
    @each $color, $value in $colores {
        .bg-#{$color} {
            background-color: $value !important;
        }
        .text-#{$color} {
            color: $value !important;
        }
        .text-bg-#{$color} {
            background-color: $value !important;
            color: color-contrast($value) !important;
        }
        .btn-#{$color} {
            @include button-variant($value, $value);
        }
        .btn-outline-#{$color} {
            @include button-outline-variant($value);
        }
    }
    $escala-color: crear-escala-color($fondo);
    @each $key, $value in $escala-color {
        .color-#{$key} {
            background-color: $value !important;
            color: color-contraste($value);
        }
    }
    
}
